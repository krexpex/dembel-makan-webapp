@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================
   БАЗА / ГЛОБАЛЬНОЕ
   ========================== */
html, body{
  @apply bg-black text-white select-none overflow-x-hidden;
  font-family: 'Inter','SF Pro Display',system-ui,sans-serif;
  -webkit-tap-highlight-color: transparent;
}
*,*::before,*::after{ box-sizing: border-box; }
button{ @apply focus:outline-none; }
.safe-bottom{ padding-bottom: calc(16px + env(safe-area-inset-bottom,0px)); }

/* ==========================
   СЛОИ СЦЕНЫ
   ========================== */
.makan-layer{ position:relative; z-index:10; } /* Макан всегда поверх PNG-надписей */
.jeb-layer{ position:relative; z-index:6; }    /* PNG-надписи над фоном/кольцом */
.jeb-img{ image-rendering:-webkit-optimize-contrast; filter:drop-shadow(0 6px 18px rgba(0,0,0,.25)); }

/* ==========================
   ОБЩИЕ АНИМАЦИИ ВХОДА
   ========================== */
.appear-scale{ animation:appear-scale .6s cubic-bezier(.25,1,.5,1); }
@keyframes appear-scale{ 0%{transform:scale(.85);opacity:0} 100%{transform:scale(1);opacity:1} }

.appear-fade-up{ animation:appear-fade-up .6s cubic-bezier(.25,1,.5,1); }
@keyframes appear-fade-up{ 0%{transform:translateY(10px);opacity:0} 100%{transform:translateY(0);opacity:1} }

.glow-enter{ animation:glow-enter 2s ease-out forwards; }
@keyframes glow-enter{ 0%{opacity:0;transform:scale(1.3)} 100%{opacity:1;transform:scale(1)} }

/* ==========================
   PNG-НАДПИСИ (3/7/10 тапов)
   ========================== */
.jeb-layer{ animation:fadein .4s ease-out forwards; }
.auto-fade-out{ animation:fadeout 2.4s ease-out forwards; }
@keyframes fadein{ from{opacity:0} to{opacity:1} }
@keyframes fadeout{ 0%,90%{opacity:1} 100%{opacity:0} }

.animate-rise-left{ animation:rise-left 2.2s cubic-bezier(.25,1,.3,1) forwards; }
@keyframes rise-left{
  0%{opacity:0;transform:translateY(20px) rotate(-4deg)}
  15%{opacity:1;transform:translateY(0) rotate(0)}
  85%{opacity:1;transform:translateY(-4px)}
  100%{opacity:0;transform:translateY(-10px)}
}
.animate-slide-from-right{ animation:slide-right 2.2s cubic-bezier(.25,1,.3,1) forwards; }
@keyframes slide-right{
  0%{opacity:0;transform:translateX(40px) rotate(2deg)}
  15%{opacity:1;transform:translateX(0) rotate(0)}
  85%{opacity:1}
  100%{opacity:0;transform:translateX(20px)}
}

/* ==========================
   МАКАН
   ========================== */
.makan-shadow{ filter:drop-shadow(0 10px 20px rgba(0,0,0,.6)); }
.animate-wobble{ animation:wobble 2.4s ease-in-out infinite; }
@keyframes wobble{ 0%,100%{transform:rotate(0)} 50%{transform:rotate(.4deg)} }

/* ==========================
   БУРГЕР / МЕНЮ
   ========================== */
.glass-btn{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 4px 18px rgba(0,0,0,.45);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  transition: background .25s, transform .25s;
}
.glass-btn:active{ background:rgba(255,255,255,.12); transform:scale(.96); }

.glass-menu{
  background: rgba(18,18,18,.85);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 10px 28px rgba(0,0,0,.4);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  border-radius: 16px;
}

/* =========================================================
   LIQUID ISLAND — компактный, без серых кружков под иконками
   ========================================================= */
.island{
  position:relative;
  filter:url(#goo);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  border:1px solid rgba(255,255,255,.14);
  box-shadow:0 12px 40px rgba(0,0,0,.28);
  backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
  pointer-events:none;
  border-radius:36px;
}
.island::after{
  content:"";
  position:absolute; inset:4px;
  border-radius:32px;
  background: linear-gradient(180deg, rgba(0,0,0,.30), rgba(0,0,0,.20));
  z-index:0; pointer-events:none;
}
.island-compact{ width:min(440px,82vw); }
.not-full{ margin:0 auto; }

/* Ряд иконок */
.island-row{
  position:relative; height:88px;
  display:flex; align-items:center; justify-content:center;
  gap:18px; pointer-events:none;
}

/* ===== ИКОНКИ (ВСЕГДА ВИДИМЫ) ===== */
.island-btn{
  position:relative; z-index:5; /* выше пузыря и капли */
  pointer-events:auto;
  height:64px; width:64px;        /* крупные области тапа */
  display:grid; place-items:center;
  border-radius:24px;
  color:#ffffff;
  opacity:1;
  transition: transform .15s ease, opacity .2s ease, color .2s ease;
}
.island-btn:active{ transform:scale(.96); }

/* svg / img / i — крупные и контрастные */
.island-btn svg,
.island-btn img,
.island-btn i{ width:32px; height:32px; display:block; }

/* Любые SVG красим под currentColor (белые контуры) */
.island-btn svg, .island-btn svg *{
  stroke: currentColor !important;
  fill: none !important;
  stroke-width: 2.2 !important;
}
/* Светящийся контур — вместо серых кружков */
.island-btn svg{
  filter:
    drop-shadow(0 0 8px rgba(255,255,255,.28))
    drop-shadow(0 2px 10px rgba(0,0,0,.45));
}

/* УБИРАЕМ любые подложки, если были раньше */
.island-btn::before,
.island-btn::after{
  content:none !important;
  display:none !important;
}

/* Активная — чуть крупнее (пузырёк — за акцент) */
.island-btn.active{ transform: translateY(-1px) scale(1.04); }

/* ===== ПУЗЫРЁК (под иконками, едет по центрам) ===== */
.active-bubble{
  position:absolute; top:50%; left:0;
  height:66px; width:var(--w,66px);
  transform: translateX(calc(var(--x,0px) - 50%)) translateY(-50%);
  z-index:3;            /* ниже иконок (5), выше капли (2) */
  border-radius:33px;
  transition: transform .42s cubic-bezier(.22,.76,.25,1),
              width .42s cubic-bezier(.22,.76,.25,1);
}
.active-bubble-core{
  position:absolute; inset:0; border-radius:33px;
  background: radial-gradient(120% 130% at 50% 12%,
              rgba(255,255,255,.35),
              rgba(255,255,255,.12) 45%,
              rgba(255,255,255,.06) 100%);
  border:1px solid rgba(255,255,255,.28);
  box-shadow:
    inset 0 2px 8px rgba(255,255,255,.28),
    inset 0 -14px 22px rgba(0,0,0,.30),
    0 12px 26px rgba(0,0,0,.30);
}
.active-bubble-gloss{
  position:absolute; inset:0; border-radius:33px;
  mix-blend-mode:screen; opacity:.7;
  background:
    radial-gradient(60% 36% at 50% 2%, rgba(255,255,255,.6), transparent 60%),
    radial-gradient(62% 56% at 50% 86%, rgba(0,0,0,.22), transparent 60%);
}

/* ===== КАПЛЯ (динамическая, под пузырём) ===== */
.blob-real{
  position:absolute; top:50%; left:0;
  height:64px; width:var(--w,72px);
  transform: translateX(calc(var(--x,0px) - 50%)) translateY(-50%);
  border-radius:32px;
  transition: transform 440ms cubic-bezier(.23,.86,.2,1),
              width 440ms cubic-bezier(.23,.86,.2,1);
  z-index:2; pointer-events:none;
}
.blob-core{
  position:absolute; inset:0; border-radius:32px;
  background: radial-gradient(90% 120% at 50% 12%,
              rgba(255,255,255,.26),
              rgba(255,255,255,.10) 45%,
              rgba(255,255,255,.06) 100%);
  border:1px solid rgba(255,255,255,.22);
  box-shadow:
    inset 0 1px 6px rgba(255,255,255,.24),
    inset 0 -12px 22px rgba(0,0,0,.25),
    0 10px 24px rgba(0,0,0,.25);
}
.blob-spec{
  position:absolute; inset:0; border-radius:32px;
  background:
    radial-gradient(70% 40% at 50% 5%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(60% 60% at 50% 80%, rgba(0,0,0,.18), transparent 60%);
  mix-blend-mode:screen; opacity:.62;
}

/* Лёгкое «дыхание» (можно убрать) */
@keyframes bubble-breathe{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.012)} }
.island-btn.active ~ .active-bubble .active-bubble-core{ animation:bubble-breathe 3.6s ease-in-out infinite; }

/* ==========================
   ФОЛБЭК БЕЗ BLUR
   ========================== */
@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)){
  .island{ background:rgba(25,27,29,.92); }
  .island::after{ background:linear-gradient(180deg, rgba(0,0,0,.32), rgba(0,0,0,.24)); }
  .glass-btn{ background:rgba(40,40,44,.9); }
  .glass-menu{ background:rgba(22,22,24,.95); }
}

/* ==========================
   МЕДИА: чуть компактнее
   ========================== */
@media (max-width: 360px){
  .island-row{ height:80px; gap:14px; }
  .island-btn{ height:60px; width:60px; }
  .island-btn svg, .island-btn img, .island-btn i{ width:30px; height:30px; }
}
