@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================
   БАЗА / ГЛОБАЛЬНОЕ
   ========================== */
html, body{
  @apply bg-black text-white select-none overflow-x-hidden;
  font-family:'Inter','SF Pro Display',system-ui,sans-serif;
  -webkit-tap-highlight-color:transparent;
}
*,*::before,*::after{ box-sizing:border-box; }
button{ @apply focus:outline-none; }
.safe-bottom{ padding-bottom:calc(16px + env(safe-area-inset-bottom,0px)); }

/* ==========================
   СЛОИ СЦЕНЫ
   ========================== */
.makan-layer{ position:relative; z-index:10; }
.jeb-layer{ position:relative; z-index:6; }
.jeb-img{ image-rendering:-webkit-optimize-contrast; }

/* ==========================
   ОБЩИЕ АНИМАЦИИ
   ========================== */
.appear-scale{ animation:appear-scale .6s cubic-bezier(.25,1,.5,1); }
@keyframes appear-scale{0%{transform:scale(.85);opacity:0}100%{transform:scale(1);opacity:1}}
.appear-fade-up{ animation:appear-fade-up .6s cubic-bezier(.25,1,.5,1); }
@keyframes appear-fade-up{0%{transform:translateY(10px);opacity:0}100%{transform:translateY(0);opacity:1}}
.glow-enter{ animation:glow-enter 2s ease-out forwards; }
@keyframes glow-enter{0%{opacity:0;transform:scale(1.3)}100%{opacity:1;transform:scale(1)}}

/* ==========================
   PNG / ЭФФЕКТЫ
   ========================== */
.jeb-layer{ animation:fadein .4s ease-out forwards; }
.auto-fade-out{ animation:fadeout 2.4s ease-out forwards; }
@keyframes fadein{from{opacity:0}to{opacity:1}}
@keyframes fadeout{0%,90%{opacity:1}100%{opacity:0}}

/* ==========================
   МАКАН
   ========================== */
.makan-shadow{ filter:none; }
.animate-wobble{ animation:wobble 2.4s ease-in-out infinite; }
@keyframes wobble{0%,100%{transform:rotate(0)}50%{transform:rotate(.4deg)}}

/* ==========================
   КНОПКИ / МЕНЮ
   ========================== */
.glass-btn{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  transition:background .25s,transform .25s;
}
.glass-btn:active{background:rgba(255,255,255,.12);transform:scale(.96);}
.glass-menu{
  background:rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  border-radius:16px;
}

/* ==========================
   LIQUID ISLAND (только капля)
   ========================== */
.island{
  position:relative;
  background:rgba(20,20,20,.75);
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 12px 40px rgba(0,0,0,.28);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  pointer-events:none;
  border-radius:36px;
}
.island-compact{width:min(440px,82vw);}
.not-full{margin:0 auto;}
.island-row{
  position:relative;
  height:88px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:18px;
  pointer-events:none;
}

/* Иконки без эффектов */
.island-btn{
  position:relative;
  z-index:5;
  pointer-events:auto;
  height:64px;
  width:64px;
  display:grid;
  place-items:center;
  border-radius:24px;
  color:#ffffff;
  opacity:1;
  transition:transform .15s ease;
}
.island-btn:active{transform:scale(.96);}
.island-btn svg,
.island-btn img,
.island-btn i{
  width:28px;
  height:28px;
  display:block;
  filter:none;
  stroke:currentColor;
  fill:none;
  stroke-width:2px;
}
.island-btn::before,
.island-btn::after{content:none!important;display:none!important;}
.island-btn.active{transform:translateY(-1px) scale(1.04);}

/* ==========================
   КАПЛЯ (единственный эффект)
   ========================== */
.blob-real{
  position:absolute;
  top:50%;
  left:0;
  height:64px;
  width:var(--w,72px);
  transform:translateX(calc(var(--x,0px) - 50%)) translateY(-50%);
  border-radius:32px;
  transition:transform 440ms cubic-bezier(.23,.86,.2,1),
             width 440ms cubic-bezier(.23,.86,.2,1);
  z-index:2;
  pointer-events:none;
}
.blob-core{
  position:absolute;
  inset:0;
  border-radius:32px;
  background:radial-gradient(90% 120% at 50% 12%,
    rgba(255,255,255,.18),
    rgba(255,255,255,.06) 45%,
    rgba(255,255,255,.03) 100%);
  border:1px solid rgba(255,255,255,.14);
  box-shadow:
    inset 0 1px 6px rgba(255,255,255,.14),
    inset 0 -12px 22px rgba(0,0,0,.25),
    0 10px 24px rgba(0,0,0,.25);
}
.blob-spec{
  position:absolute;
  inset:0;
  border-radius:32px;
  background:
    radial-gradient(70% 40% at 50% 5%, rgba(255,255,255,.35), transparent 60%),
    radial-gradient(60% 60% at 50% 80%, rgba(0,0,0,.18), transparent 60%);
  mix-blend-mode:screen;
  opacity:.55;
}

/* ==========================
   ФОЛБЭК
   ========================== */
@supports not ((-webkit-backdrop-filter:none) or (backdrop-filter:none)){
  .island{background:rgba(25,27,29,.92);}
  .glass-btn{background:rgba(40,40,44,.9);}
  .glass-menu{background:rgba(22,22,24,.95);}
}

/* ==========================
   МЕДИА
   ========================== */
@media (max-width:360px){
  .island-row{height:80px;gap:14px;}
  .island-btn{height:60px;width:60px;}
  .island-btn svg,.island-btn img,.island-btn i{width:26px;height:26px;}
}
