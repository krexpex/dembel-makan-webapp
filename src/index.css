@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== БАЗА ===== */
:root {
  --bg-dark: #0b1110;
  --fg: #e7e9ea;
}

/* Небольшая сглаженность */
* { -webkit-tap-highlight-color: transparent; }

/* ===== СЛОИ ПО Z-INDEX ===== */
/* Макан всегда поверх остального внутри сцены */
.makan-layer { position: relative; z-index: 10; }
/* PNG-надписи над фоном/кольцом, но под Маканом */
.jeb-layer   { position: relative; z-index: 6; }

/* Доп. тень Макану (если не хватает встроенной) */
.makan-shadow { filter: drop-shadow(0 22px 46px rgba(0,0,0,.45)); }

/* ===== КНОПКИ-СТЕКЛО / МЕНЮ ===== */
.glass-btn{
  color: #f1f5f9;
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
  border: 1px solid rgba(255,255,255,.18);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
.glass-menu{
  background: rgba(24,24,28,.78);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

/* ===== АНИМАЦИИ ===== */
/* лёгкое «покачивание» Макана */
@keyframes wobble {
  0%,100% { transform: translateY(0) rotate(0deg); }
  50%     { transform: translateY(-2px) rotate(-.2deg); }
}
.animate-wobble { animation: wobble 4.5s ease-in-out infinite; }

/* масштаб при входе */
@keyframes appearScale {
  0% { opacity: 0; transform: scale(.96); }
  100%{ opacity: 1; transform: scale(1); }
}
.appear-scale { animation: appearScale .45s cubic-bezier(.2,.65,.2,1) both; }

/* плавный подъём текста */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}
.appear-fade-up { animation: fadeUp .5s ease-out both; }

/* PNG надпись 1 — выплытие слева снизу */
@keyframes riseLeft {
  0%   { transform: translate(-24px, 10px) scale(.96) rotate(-2deg); opacity: 0; }
  60%  { opacity: 1; }
  100% { transform: translate(0, 0) scale(1) rotate(0deg); opacity: 1; }
}
.animate-rise-left { animation: riseLeft .42s cubic-bezier(.2,.7,.2,1) both; }

/* PNG надпись 2 — выезд справа */
@keyframes slideRight {
  0%   { transform: translate(24px, -50%) scale(.96); opacity: 0; }
  60%  { opacity: 1; }
  100% { transform: translate(0, -50%) scale(1); opacity: 1; }
}
.animate-slide-from-right { animation: slideRight .42s cubic-bezier(.2,.7,.2,1) both; }

/* авто-угасание PNG надписей после показа */
@keyframes autoFade {
  0%, 70% { opacity: 1; filter: blur(0); }
  100%    { opacity: 0; filter: blur(2px); }
}
.auto-fade-out { animation: autoFade 2.2s ease-out .2s forwards; }

/* лёгкое подсветление фона сцены при входе */
.glow-enter {
  animation: glowIn .8s ease-out both;
}
@keyframes glowIn {
  from { opacity: 0; transform: scale(1.02); }
  to   { opacity: 1; transform: scale(1); }
}

/* PNG — небольшое «плакатика» сглаживание */
.jeb-img {
  image-rendering: -webkit-optimize-contrast;
  filter: drop-shadow(0 6px 18px rgba(0,0,0,.25));
  will-change: transform, opacity, filter;
}

/* ===== НИЖНИЙ ОСТРОВОК С «КАПЛЕЙ» ===== */

/* Контейнер островка */
.island{
  filter: url(#goo);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 12px 40px rgba(0,0,0,.28);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  position: relative;
  pointer-events: none; /* кликаются только кнопки внутри */
}

/* «Капля» — гибкий овальный элемент под кнопками */
.blob-real{
  position: absolute;
  top: 50%;
  left: 0;
  height: 56px;
  width: var(--w, 64px);
  border-radius: 28px;
  transform: translateX(calc(var(--x, 0px) - 50%)) translateY(-50%);
  transition:
    transform 420ms cubic-bezier(.22,.76,.25,1),
    width 420ms cubic-bezier(.22,.76,.25,1);
  z-index: 1; /* ниже кнопок */
  pointer-events: none;
}
.blob-core{
  position: absolute; inset: 0;
  background: radial-gradient(90% 120% at 50% 12%,
               rgba(255,255,255,.28), rgba(255,255,255,.10) 45%, rgba(255,255,255,.06) 100%);
  border: 1px solid rgba(255,255,255,.25);
  border-bottom-color: rgba(0,0,0,.15);
  box-shadow:
    inset 0 1px 6px rgba(255,255,255,.25),
    inset 0 -12px 22px rgba(0,0,0,.25),
    0 10px 24px rgba(0,0,0,.25);
  border-radius: 28px;
}
.blob-spec{
  position: absolute; inset: 0;
  border-radius: 28px;
  background:
    radial-gradient(70% 40% at 50% 5%, rgba(255,255,255,.45), transparent 60%),
    radial-gradient(60% 60% at 50% 80%, rgba(0,0,0,.18), transparent 60%);
  mix-blend-mode: screen;
  opacity: .65;
  pointer-events: none;
}

/* начальная плавность */
.blob-mounted { transition-delay: 20ms; }

/* направление растяжения — чуть разные кривые */
.stretch-r{ transition-timing-function: cubic-bezier(.23,.86,.2,1); }
.stretch-l{ transition-timing-function: cubic-bezier(.23,.86,.2,1); }

/* Кнопки на островке — ВСЕГДА видны и выше капли */
.island-btn{
  height: 56px; width: 56px;
  display: grid; place-items: center;
  color: #eceff1;
  z-index: 3;                 /* выше blob */
  border-radius: 20px;
  transition: color .2s ease, transform .12s ease, opacity .2s ease;
  opacity: .9;
  position: relative;
  pointer-events: auto;       /* кликабельны, даже если родитель pointer-events:none */
}
.island-btn:active { transform: scale(.96); }
.island-btn.active{
  color: #5cc3ff;
  opacity: 1;
  filter: drop-shadow(0 2px 10px rgba(92,195,255,.35));
}

/* подсветка-подложка под иконкой */
.island-btn::before{
  content:"";
  position:absolute; inset:0;
  margin:auto; width:44px; height:44px;
  border-radius:22px;
  background: rgba(255,255,255,.06);
  z-index:-1;
  transition: background .2s ease, transform .2s ease;
}
.island-btn.active::before{
  background: rgba(255,255,255,.12);
  transform: scale(1.03);
}

/* чтобы островок не тянулся от края до края */
.not-full{ margin: 0 auto; }

/* ===== ВСПОМОГАТЕЛЬНОЕ ===== */
/* Быстрый трюк для кросс-браузерного blur на iOS */
@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
  .glass-btn, .glass-menu, .island {
    background: rgba(35, 38, 42, .92);
  }
}
